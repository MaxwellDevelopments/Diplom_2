{"uuid":"e19562ff-710a-4bab-a6cd-c34d6749ed8f","historyId":"c0fabab9f1a633c867845456b1ae6fc1","testCaseId":"[engine:junit-jupiter]/[class:tests.stellarburger.user.ChangeInfoTests]/[test-template:shouldChangeInfoAuthorizedUser(stellarburgers.pojo.User)]","testCaseName":"PATCH /api/auth/user should change user info. Positive test, authorized user","fullName":"tests.stellarburger.user.ChangeInfoTests.shouldChangeInfoAuthorizedUser","labels":[{"name":"junit.platform.uniqueid","value":"[engine:junit-jupiter]/[class:tests.stellarburger.user.ChangeInfoTests]/[test-template:shouldChangeInfoAuthorizedUser(stellarburgers.pojo.User)]/[test-template-invocation:#4]"},{"name":"epic","value":"Tests for checking user change info functionality"},{"name":"host","value":"DESKTOP-DI5RTNF"},{"name":"thread","value":"16564@DESKTOP-DI5RTNF.main(1)"},{"name":"framework","value":"junit-platform"},{"name":"language","value":"java"},{"name":"package","value":"tests.stellarburger.user.ChangeInfoTests"},{"name":"testClass","value":"tests.stellarburger.user.ChangeInfoTests"},{"name":"testMethod","value":"shouldChangeInfoAuthorizedUser"},{"name":"suite","value":"tests.stellarburger.user.ChangeInfoTests"}],"links":[],"name":"PATCH /api/auth/user should change user info. Positive test, authorized user [4] User{email='null', password='weuunu', name='corrina.conroy'}","status":"passed","stage":"finished","description":"Positive test for changing user's info. Status code should be 200, also checking json structure","steps":[{"name":"Precondition: create user","status":"passed","stage":"finished","steps":[{"name":"POST /api/auth/register. Creating a user.","status":"passed","stage":"finished","steps":[],"attachments":[{"name":"Request","source":"aead99d1-f74b-41c1-b91e-64287e535566-attachment.html","type":"text/html"},{"name":"HTTP/1.1 200 OK","source":"c522d7b6-9c29-4b0d-99c4-c02d61276e55-attachment.html","type":"text/html"}],"parameters":[{"name":"user","value":"User{email='uiruv@vetl.ru', password='xawtmc', name='soo.sauer'}"}],"start":1716817750052,"stop":1716817750478},{"name":"Check response has status 200","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Register user POST /api/auth/register. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"user\": {\n        \"email\": \"uiruv@vetl.ru\",\n        \"name\": \"soo.sauer\"\n    },\n    \"accessToken\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjU3OWVkMjgwMDAxYjQxOWYzMSIsImlhdCI6MTcxNjgxNzc1MSwiZXhwIjoxNzE2ODE4OTUxfQ.oYWYpmu7dsCsU5-uXiqZYOZNBxTeXV_aoRph_pt0u3Y\",\n    \"refreshToken\": \"63f1331ebc1c63d6714b339ca3e7132b5b9704cc2a4c6ebc2af49cab718295fcb29ab001cafd87e6\"\n}"}],"start":1716817750478,"stop":1716817750478},{"name":"Check json parameter in response","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Register user POST /api/auth/register. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"user\": {\n        \"email\": \"uiruv@vetl.ru\",\n        \"name\": \"soo.sauer\"\n    },\n    \"accessToken\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjU3OWVkMjgwMDAxYjQxOWYzMSIsImlhdCI6MTcxNjgxNzc1MSwiZXhwIjoxNzE2ODE4OTUxfQ.oYWYpmu7dsCsU5-uXiqZYOZNBxTeXV_aoRph_pt0u3Y\",\n    \"refreshToken\": \"63f1331ebc1c63d6714b339ca3e7132b5b9704cc2a4c6ebc2af49cab718295fcb29ab001cafd87e6\"\n}"},{"name":"jsonPath","value":"success"},{"name":"matcher","value":"is <true>"}],"start":1716817750478,"stop":1716817750490}],"attachments":[],"parameters":[{"name":"user","value":"User{email='uiruv@vetl.ru', password='xawtmc', name='soo.sauer'}"}],"start":1716817750052,"stop":1716817750490},{"name":"PATCH /api/auth/user. Change user info.","status":"passed","stage":"finished","steps":[],"attachments":[{"name":"Request","source":"ceddc477-256c-491d-94ab-61231fc4e5b0-attachment.html","type":"text/html"},{"name":"HTTP/1.1 200 OK","source":"de55cd63-153b-4b87-a198-9f57aeea49bc-attachment.html","type":"text/html"}],"parameters":[{"name":"user","value":"User{email='null', password='weuunu', name='corrina.conroy'}"},{"name":"accessToken","value":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjU3OWVkMjgwMDAxYjQxOWYzMSIsImlhdCI6MTcxNjgxNzc1MSwiZXhwIjoxNzE2ODE4OTUxfQ.oYWYpmu7dsCsU5-uXiqZYOZNBxTeXV_aoRph_pt0u3Y"}],"start":1716817750528,"stop":1716817750978},{"name":"Check response has status 200","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Change user info. PATCH /api/auth/user. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"user\": {\n        \"email\": \"uiruv@vetl.ru\",\n        \"name\": \"corrina.conroy\"\n    }\n}"}],"start":1716817750979,"stop":1716817750979},{"name":"Checking json structure in change user info response","status":"passed","stage":"finished","steps":[{"name":"Check json parameter in response","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Change user info. PATCH /api/auth/user. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"user\": {\n        \"email\": \"uiruv@vetl.ru\",\n        \"name\": \"corrina.conroy\"\n    }\n}"},{"name":"jsonPath","value":"success"},{"name":"matcher","value":"is <true>"}],"start":1716817750979,"stop":1716817750992},{"name":"Check json parameter in response","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Change user info. PATCH /api/auth/user. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"user\": {\n        \"email\": \"uiruv@vetl.ru\",\n        \"name\": \"corrina.conroy\"\n    }\n}"},{"name":"jsonPath","value":"user"},{"name":"matcher","value":"not null"}],"start":1716817750992,"stop":1716817751010},{"name":"Check json parameter in response","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Change user info. PATCH /api/auth/user. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"user\": {\n        \"email\": \"uiruv@vetl.ru\",\n        \"name\": \"corrina.conroy\"\n    }\n}"},{"name":"jsonPath","value":"user.name"},{"name":"matcher","value":"is \"corrina.conroy\""}],"start":1716817751010,"stop":1716817751026}],"attachments":[],"parameters":[{"name":"response","value":"Change user info. PATCH /api/auth/user. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"user\": {\n        \"email\": \"uiruv@vetl.ru\",\n        \"name\": \"corrina.conroy\"\n    }\n}"},{"name":"userWithNewInfo","value":"User{email='null', password='weuunu', name='corrina.conroy'}"}],"start":1716817750979,"stop":1716817751026},{"name":"Checking that password changed and can login with new password","status":"passed","stage":"finished","steps":[{"name":"POST /api/auth/login. Login a user.","status":"passed","stage":"finished","steps":[],"attachments":[{"name":"Request","source":"32c3eb01-5b92-4964-a0ce-0bf5b19be622-attachment.html","type":"text/html"},{"name":"HTTP/1.1 200 OK","source":"bd68bca1-d3f8-469d-83bd-b0040aa318d0-attachment.html","type":"text/html"}],"parameters":[{"name":"user","value":"User{email='uiruv@vetl.ru', password='weuunu', name='null'}"}],"start":1716817751026,"stop":1716817751490},{"name":"Check response has status 200","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Login user POST api/auth/login. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"accessToken\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjU3OWVkMjgwMDAxYjQxOWYzMSIsImlhdCI6MTcxNjgxNzc1MiwiZXhwIjoxNzE2ODE4OTUyfQ._mMXGFwhS7TmHUdNiRo0vTAa6KgK4Gf8HSDV18iHPlw\",\n    \"refreshToken\": \"42a06c9fbb92c21b094ca396ebc112510f31eb5ab1d880bc6833c7d6ae33e88a5e93682395ef17a4\",\n    \"user\": {\n        \"email\": \"uiruv@vetl.ru\",\n        \"name\": \"corrina.conroy\"\n    }\n}"}],"start":1716817751490,"stop":1716817751490}],"attachments":[],"parameters":[{"name":"newPassword","value":"weuunu"},{"name":"email","value":"uiruv@vetl.ru"}],"start":1716817751026,"stop":1716817751490},{"name":"Postcondition: delete user","status":"passed","stage":"finished","steps":[{"name":"DELETE /api/auth/user. Deleting a user.","status":"passed","stage":"finished","steps":[],"attachments":[{"name":"Request","source":"e91b92f3-03c8-429f-b624-664b28bf8423-attachment.html","type":"text/html"},{"name":"HTTP/1.1 202 Accepted","source":"27bfb90c-46e7-4e3b-aeef-008f0831bfb8-attachment.html","type":"text/html"}],"parameters":[{"name":"accessToken","value":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjU3OWVkMjgwMDAxYjQxOWYzMSIsImlhdCI6MTcxNjgxNzc1MSwiZXhwIjoxNzE2ODE4OTUxfQ.oYWYpmu7dsCsU5-uXiqZYOZNBxTeXV_aoRph_pt0u3Y"}],"start":1716817751491,"stop":1716817752130},{"name":"Check response has status 202","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Delete user DELETE /api/auth/user. \nStatus code: 202.\nBody:\n{\n    \"success\": true,\n    \"message\": \"User successfully removed\"\n}"}],"start":1716817752130,"stop":1716817752131},{"name":"Check json parameter in response","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Delete user DELETE /api/auth/user. \nStatus code: 202.\nBody:\n{\n    \"success\": true,\n    \"message\": \"User successfully removed\"\n}"},{"name":"jsonPath","value":"success"},{"name":"matcher","value":"is <true>"}],"start":1716817752131,"stop":1716817752143},{"name":"Check json parameter in response","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Delete user DELETE /api/auth/user. \nStatus code: 202.\nBody:\n{\n    \"success\": true,\n    \"message\": \"User successfully removed\"\n}"},{"name":"jsonPath","value":"message"},{"name":"matcher","value":"is \"User successfully removed\""}],"start":1716817752144,"stop":1716817752157}],"attachments":[],"parameters":[{"name":"accessToken","value":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjU3OWVkMjgwMDAxYjQxOWYzMSIsImlhdCI6MTcxNjgxNzc1MSwiZXhwIjoxNzE2ODE4OTUxfQ.oYWYpmu7dsCsU5-uXiqZYOZNBxTeXV_aoRph_pt0u3Y"}],"start":1716817751491,"stop":1716817752157}],"attachments":[],"parameters":[{"name":"UniqueId","value":"[engine:junit-jupiter]/[class:tests.stellarburger.user.ChangeInfoTests]/[test-template:shouldChangeInfoAuthorizedUser(stellarburgers.pojo.User)]/[test-template-invocation:#4]","mode":"hidden"}],"start":1716817750051,"stop":1716817752158}