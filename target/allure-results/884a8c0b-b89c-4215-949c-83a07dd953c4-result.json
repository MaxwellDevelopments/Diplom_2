{"uuid":"884a8c0b-b89c-4215-949c-83a07dd953c4","historyId":"22f7fb6e5c41ae88fcf369e2fb63754f","testCaseId":"[engine:junit-jupiter]/[class:tests.stellarburger.user.ChangeInfoTests]/[method:shouldNotChangeInfoUnauthorizedUser()]","testCaseName":"PATCH /api/auth/user should change user info. Negative test, unauthorized user","fullName":"tests.stellarburger.user.ChangeInfoTests.shouldNotChangeInfoUnauthorizedUser","labels":[{"name":"junit.platform.uniqueid","value":"[engine:junit-jupiter]/[class:tests.stellarburger.user.ChangeInfoTests]/[method:shouldNotChangeInfoUnauthorizedUser()]"},{"name":"epic","value":"Tests for checking user change info functionality"},{"name":"host","value":"DESKTOP-DI5RTNF"},{"name":"thread","value":"16564@DESKTOP-DI5RTNF.main(1)"},{"name":"framework","value":"junit-platform"},{"name":"language","value":"java"},{"name":"package","value":"tests.stellarburger.user.ChangeInfoTests"},{"name":"testClass","value":"tests.stellarburger.user.ChangeInfoTests"},{"name":"testMethod","value":"shouldNotChangeInfoUnauthorizedUser"},{"name":"suite","value":"tests.stellarburger.user.ChangeInfoTests"}],"links":[],"name":"PATCH /api/auth/user should change user info. Negative test, unauthorized user","status":"passed","stage":"finished","description":"Negative test for changing user's info. Status code should be 401, also checking json structure","steps":[{"name":"Precondition: create user","status":"passed","stage":"finished","steps":[{"name":"POST /api/auth/register. Creating a user.","status":"passed","stage":"finished","steps":[],"attachments":[{"name":"Request","source":"b2f92825-3d24-4003-b78f-89cc11299d10-attachment.html","type":"text/html"},{"name":"HTTP/1.1 200 OK","source":"fad68826-c9cc-4214-8471-c2b1b2511c72-attachment.html","type":"text/html"}],"parameters":[{"name":"user","value":"User{email='klpie@vagr.ru', password='wdtsfe', name='randy.wunsch'}"}],"start":1716817742427,"stop":1716817742888},{"name":"Check response has status 200","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Register user POST /api/auth/register. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"user\": {\n        \"email\": \"klpie@vagr.ru\",\n        \"name\": \"randy.wunsch\"\n    },\n    \"accessToken\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjRmOWVkMjgwMDAxYjQxOWYyNSIsImlhdCI6MTcxNjgxNzc0MywiZXhwIjoxNzE2ODE4OTQzfQ.t7WasYSeCErsJcmr9--W3FDLr_c5qBqb1iNoLWqhL5k\",\n    \"refreshToken\": \"310818023078408c5c304bb32d4b2d992553d1232646d7c0b54e1b8f95e9751138ae2b94609ae5bb\"\n}"}],"start":1716817742888,"stop":1716817742889},{"name":"Check json parameter in response","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Register user POST /api/auth/register. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"user\": {\n        \"email\": \"klpie@vagr.ru\",\n        \"name\": \"randy.wunsch\"\n    },\n    \"accessToken\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjRmOWVkMjgwMDAxYjQxOWYyNSIsImlhdCI6MTcxNjgxNzc0MywiZXhwIjoxNzE2ODE4OTQzfQ.t7WasYSeCErsJcmr9--W3FDLr_c5qBqb1iNoLWqhL5k\",\n    \"refreshToken\": \"310818023078408c5c304bb32d4b2d992553d1232646d7c0b54e1b8f95e9751138ae2b94609ae5bb\"\n}"},{"name":"jsonPath","value":"success"},{"name":"matcher","value":"is <true>"}],"start":1716817742889,"stop":1716817742908}],"attachments":[],"parameters":[{"name":"user","value":"User{email='klpie@vagr.ru', password='wdtsfe', name='randy.wunsch'}"}],"start":1716817742427,"stop":1716817742908},{"name":"PATCH /api/auth/user. Change user info.","status":"passed","stage":"finished","steps":[],"attachments":[{"name":"Request","source":"5bf8e2bf-8311-4b7e-9c11-6b9d9c98abe4-attachment.html","type":"text/html"},{"name":"HTTP/1.1 401 Unauthorized","source":"9040dd67-9768-46e2-911f-4d72e352c2f7-attachment.html","type":"text/html"}],"parameters":[{"name":"user","value":"User{email='mholj@cvgv.ru', password='jopkug', name='archie.kessler'}"},{"name":"accessToken","value":"null"}],"start":1716817742923,"stop":1716817743285},{"name":"POST /api/auth/login. Login a user.","status":"passed","stage":"finished","steps":[],"attachments":[{"name":"Request","source":"81152168-5cf0-4d5b-a92f-d7f5bdde5d89-attachment.html","type":"text/html"},{"name":"HTTP/1.1 200 OK","source":"c7914f27-f9d9-4863-8fcc-0f717c1a7008-attachment.html","type":"text/html"}],"parameters":[{"name":"user","value":"User{email='klpie@vagr.ru', password='wdtsfe', name='randy.wunsch'}"}],"start":1716817743285,"stop":1716817743746},{"name":"Check response has status 200","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Login user POST api/auth/login. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"accessToken\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjRmOWVkMjgwMDAxYjQxOWYyNSIsImlhdCI6MTcxNjgxNzc0NCwiZXhwIjoxNzE2ODE4OTQ0fQ.ObczSxMCl40-vrUTp54oHFdmplHcE1cwh4kZeqHCdcQ\",\n    \"refreshToken\": \"5640b04de6837a3d605b6bef726ed69ab38585105ca605e9e31746322d8ad3df4339032468ffea27\",\n    \"user\": {\n        \"email\": \"klpie@vagr.ru\",\n        \"name\": \"randy.wunsch\"\n    }\n}"}],"start":1716817743746,"stop":1716817743746},{"name":"Check that info has not been changed","status":"passed","stage":"finished","steps":[{"name":"Check json structure in login response","status":"passed","stage":"finished","steps":[{"name":"Check json parameter in response","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Login user POST api/auth/login. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"accessToken\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjRmOWVkMjgwMDAxYjQxOWYyNSIsImlhdCI6MTcxNjgxNzc0NCwiZXhwIjoxNzE2ODE4OTQ0fQ.ObczSxMCl40-vrUTp54oHFdmplHcE1cwh4kZeqHCdcQ\",\n    \"refreshToken\": \"5640b04de6837a3d605b6bef726ed69ab38585105ca605e9e31746322d8ad3df4339032468ffea27\",\n    \"user\": {\n        \"email\": \"klpie@vagr.ru\",\n        \"name\": \"randy.wunsch\"\n    }\n}"},{"name":"jsonPath","value":"success"},{"name":"matcher","value":"is <true>"}],"start":1716817743758,"stop":1716817743789},{"name":"Check json parameter in response","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Login user POST api/auth/login. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"accessToken\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjRmOWVkMjgwMDAxYjQxOWYyNSIsImlhdCI6MTcxNjgxNzc0NCwiZXhwIjoxNzE2ODE4OTQ0fQ.ObczSxMCl40-vrUTp54oHFdmplHcE1cwh4kZeqHCdcQ\",\n    \"refreshToken\": \"5640b04de6837a3d605b6bef726ed69ab38585105ca605e9e31746322d8ad3df4339032468ffea27\",\n    \"user\": {\n        \"email\": \"klpie@vagr.ru\",\n        \"name\": \"randy.wunsch\"\n    }\n}"},{"name":"jsonPath","value":"user.email"},{"name":"matcher","value":"is \"klpie@vagr.ru\""}],"start":1716817743789,"stop":1716817743811},{"name":"Check json parameter in response","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Login user POST api/auth/login. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"accessToken\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjRmOWVkMjgwMDAxYjQxOWYyNSIsImlhdCI6MTcxNjgxNzc0NCwiZXhwIjoxNzE2ODE4OTQ0fQ.ObczSxMCl40-vrUTp54oHFdmplHcE1cwh4kZeqHCdcQ\",\n    \"refreshToken\": \"5640b04de6837a3d605b6bef726ed69ab38585105ca605e9e31746322d8ad3df4339032468ffea27\",\n    \"user\": {\n        \"email\": \"klpie@vagr.ru\",\n        \"name\": \"randy.wunsch\"\n    }\n}"},{"name":"jsonPath","value":"user.name"},{"name":"matcher","value":"is \"randy.wunsch\""}],"start":1716817743811,"stop":1716817743830},{"name":"Check json parameter in response","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Login user POST api/auth/login. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"accessToken\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjRmOWVkMjgwMDAxYjQxOWYyNSIsImlhdCI6MTcxNjgxNzc0NCwiZXhwIjoxNzE2ODE4OTQ0fQ.ObczSxMCl40-vrUTp54oHFdmplHcE1cwh4kZeqHCdcQ\",\n    \"refreshToken\": \"5640b04de6837a3d605b6bef726ed69ab38585105ca605e9e31746322d8ad3df4339032468ffea27\",\n    \"user\": {\n        \"email\": \"klpie@vagr.ru\",\n        \"name\": \"randy.wunsch\"\n    }\n}"},{"name":"jsonPath","value":"accessToken"},{"name":"matcher","value":"a string starting with \"Bearer\""}],"start":1716817743833,"stop":1716817743853},{"name":"Check json parameter in response","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Login user POST api/auth/login. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"accessToken\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjRmOWVkMjgwMDAxYjQxOWYyNSIsImlhdCI6MTcxNjgxNzc0NCwiZXhwIjoxNzE2ODE4OTQ0fQ.ObczSxMCl40-vrUTp54oHFdmplHcE1cwh4kZeqHCdcQ\",\n    \"refreshToken\": \"5640b04de6837a3d605b6bef726ed69ab38585105ca605e9e31746322d8ad3df4339032468ffea27\",\n    \"user\": {\n        \"email\": \"klpie@vagr.ru\",\n        \"name\": \"randy.wunsch\"\n    }\n}"},{"name":"jsonPath","value":"refreshToken"},{"name":"matcher","value":"not null"}],"start":1716817743853,"stop":1716817743871}],"attachments":[],"parameters":[{"name":"response","value":"Login user POST api/auth/login. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"accessToken\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjRmOWVkMjgwMDAxYjQxOWYyNSIsImlhdCI6MTcxNjgxNzc0NCwiZXhwIjoxNzE2ODE4OTQ0fQ.ObczSxMCl40-vrUTp54oHFdmplHcE1cwh4kZeqHCdcQ\",\n    \"refreshToken\": \"5640b04de6837a3d605b6bef726ed69ab38585105ca605e9e31746322d8ad3df4339032468ffea27\",\n    \"user\": {\n        \"email\": \"klpie@vagr.ru\",\n        \"name\": \"randy.wunsch\"\n    }\n}"},{"name":"user","value":"User{email='klpie@vagr.ru', password='wdtsfe', name='randy.wunsch'}"}],"start":1716817743758,"stop":1716817743871}],"attachments":[],"parameters":[{"name":"response","value":"Login user POST api/auth/login. \nStatus code: 200.\nBody:\n{\n    \"success\": true,\n    \"accessToken\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjRmOWVkMjgwMDAxYjQxOWYyNSIsImlhdCI6MTcxNjgxNzc0NCwiZXhwIjoxNzE2ODE4OTQ0fQ.ObczSxMCl40-vrUTp54oHFdmplHcE1cwh4kZeqHCdcQ\",\n    \"refreshToken\": \"5640b04de6837a3d605b6bef726ed69ab38585105ca605e9e31746322d8ad3df4339032468ffea27\",\n    \"user\": {\n        \"email\": \"klpie@vagr.ru\",\n        \"name\": \"randy.wunsch\"\n    }\n}"}],"start":1716817743747,"stop":1716817743871},{"name":"Postcondition: delete user","status":"passed","stage":"finished","steps":[{"name":"DELETE /api/auth/user. Deleting a user.","status":"passed","stage":"finished","steps":[],"attachments":[{"name":"Request","source":"09a896d2-67a8-4007-afff-2c7332c746f3-attachment.html","type":"text/html"},{"name":"HTTP/1.1 202 Accepted","source":"590e4df9-f471-4d8d-9653-a1107fa9e131-attachment.html","type":"text/html"}],"parameters":[{"name":"accessToken","value":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjRmOWVkMjgwMDAxYjQxOWYyNSIsImlhdCI6MTcxNjgxNzc0MywiZXhwIjoxNzE2ODE4OTQzfQ.t7WasYSeCErsJcmr9--W3FDLr_c5qBqb1iNoLWqhL5k"}],"start":1716817743873,"stop":1716817744466},{"name":"Check response has status 202","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Delete user DELETE /api/auth/user. \nStatus code: 202.\nBody:\n{\n    \"success\": true,\n    \"message\": \"User successfully removed\"\n}"}],"start":1716817744466,"stop":1716817744466},{"name":"Check json parameter in response","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Delete user DELETE /api/auth/user. \nStatus code: 202.\nBody:\n{\n    \"success\": true,\n    \"message\": \"User successfully removed\"\n}"},{"name":"jsonPath","value":"success"},{"name":"matcher","value":"is <true>"}],"start":1716817744466,"stop":1716817744507},{"name":"Check json parameter in response","status":"passed","stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"response","value":"Delete user DELETE /api/auth/user. \nStatus code: 202.\nBody:\n{\n    \"success\": true,\n    \"message\": \"User successfully removed\"\n}"},{"name":"jsonPath","value":"message"},{"name":"matcher","value":"is \"User successfully removed\""}],"start":1716817744507,"stop":1716817744522}],"attachments":[],"parameters":[{"name":"accessToken","value":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2NTQ4ZjRmOWVkMjgwMDAxYjQxOWYyNSIsImlhdCI6MTcxNjgxNzc0MywiZXhwIjoxNzE2ODE4OTQzfQ.t7WasYSeCErsJcmr9--W3FDLr_c5qBqb1iNoLWqhL5k"}],"start":1716817743873,"stop":1716817744522}],"attachments":[],"parameters":[],"start":1716817742424,"stop":1716817744522}